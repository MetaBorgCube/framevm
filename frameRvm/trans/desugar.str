module desugar

imports
	desugar/fixSeq
	desugar/pure

signature
  sorts S
  constructors
  	Nop : S
    Seq : [Instr] -> S
    Seq : [Instr] * [(ID, INT)] -> S
    Assign : [ID] * Exp * INT -> S
    Terminal : Exp * INT -> S
    
rules  
    desugar-all = fix-seq; detect-pure
  	 
	resugar-all = resugar-pure; resugar-seq
	
	
	filter-split(s): [] -> ([], [])
	filter-split(s): [h|t] -> a
	  where
   		(y, n) := <filter-split(s)> t;
	 	((<s> h ; <id>([h|y], n)) <+ <id>(y, [h|n])) => a