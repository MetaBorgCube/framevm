module smoke_if_else

language framevm

test if else example RISC [[#init 2
MAIN:
	ipush 1
	set [0]
	ipush 2
	set [1]
	get [0]
	ipush 1
	eqi
	jumpz THEN ELSE

THEN:
	get [1]
	set [0]
	jump CONT
  
ELSE:
	ipush 10
	set [0]
	jump CONT
 
CONT:
	get [0]
	print
	ipush 0
	return
]] transform "Run -> RISC" to "IntV(10)"


test if else example CISC [[#init 2
MAIN:
	ipush 1
	set [0]
	ipush 2
	set [1]
	get [0]
	ipush 1
	eqi
	jumpz THEN ELSE

THEN:
	get [1]
	set [0]
	jump CONT
  
ELSE:
	ipush 10
	set [0]
	jump CONT
 
CONT:
	get [0]
	print
	ipush 0
	return
]] transform "Run -> CISC" to "IntV(10)"